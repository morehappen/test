{"version":3,"sources":["../../es6/common/common-passenger.es6"],"names":[],"mappings":"AAAA;AACA;;;;;;IAEO,c;AAEL,2BAAe;AAAA;AAEd;;AAED;;;;;kCACiB;AAChB,OAAI,aAAa,EAAE,IAAF,CAAO,EAAE,cAAF,EAAkB,GAAlB,EAAP,CAAjB;AAAA,OAAkD;AACjD,iBAAc,EAAE,IAAF,CAAO,EAAE,eAAF,EAAmB,GAAnB,EAAP,CADf;AAAA,OACiD;AAChD,cAAW,CAFZ;AAAA,OAEc;AACb,aAAU,EAHX;;AAKA,eAAY,CAAZ,GAAgB,QAAQ,IAAR,CAAa,WAAb,CAAhB,GAA4C,EAA5C;AACA,iBAAc,CAAd,GAAkB,QAAQ,IAAR,CAAa,YAAb,CAAlB,GAA+C,EAA/C;AACA,kBAAe,CAAf,GAAmB,QAAQ,IAAR,CAAa,cAAb,CAAnB,GAAkD,EAAlD;AACA,kBAAe,SAAf,CAAyB,OAAzB,GAAmC,OAAnC;AACA,QAAK,QAAL,CAAc,YAAY,CAAZ,GAAgB,KAAK,SAAL,EAAhB,GAAoC,eAAe,CAAf,GAAmB,KAAK,UAAL,EAAnB,GAAwC,cAAc,CAAd,GAAkB,KAAK,YAAL,EAAlB,GAAwC,EAAlI,EAAuI;AACtI,0BADsI;AAEtI,4BAFsI;AAGtI;AAHsI,IAAvI;AAKA;;AAED;AACA;;;;;;;;;;;;;2BAUU,W,EAAY,S,EAAW;AAChC,OAAI,OAAO,EAAE,IAAF,ujBAaH,UAAU,QAAV,IAAsB,CAAtB,oEAAqE,EAblE,8BAcH,UAAU,UAAV,IAAwB,CAAxB,aAAmC,UAAU,QAAV,IAAsB,CAAtB,GAA0B,0BAA1B,GAAuD,EAA1F,uCAA4G,EAdzG,8BAeH,UAAU,WAAV,IAAyB,CAAzB,aAAoC,UAAU,QAAV,IAAsB,CAAtB,IAA2B,UAAU,UAAV,IAAwB,CAAnD,GAAuD,0BAAvD,GAAoF,EAAxH,yDAA4I,EAfzI,mFAiB2B,WAjB3B,0EAAX;AAqBA,KAAE,MAAF,EAAU,MAAV,CAAiB,IAAjB;AACA,KAAE,MAAF,EAAU,QAAV,CAAmB,YAAnB;AACA;;AAED;;;;8BACa;;AAEZ,UAAO,EAAE,IAAF,20BAAP;AAeA;;AAED;;;;+BACc;;AAEb,UAAO,EAAE,IAAF,ogHAAP;AAuDA;;AAED;;;;iCACgB;;AAEf,UAAO,EAAE,IAAF,mnEAAP;AAkCA;;AAED;AACA;;;;;;;;6BAKY,O,EAAQ,Q,EAAU;AAC7B,KAAE,IAAF,CAAO;AACN,UAAM,MADA;AAEN,SAAK,0BAFC;AAGN,UAAM;AACL,cAAS;AADJ,KAHA;AAMN,aAAS,uBAAQ;AAChB,SAAG,KAAK,MAAL,KAAgB,GAAnB,EAAuB;AACtB,eAAS,KAAK,IAAd;AACA;AACA;AACD,WAAM,GAAN,CAAU,KAAK,GAAf;AACA,KAZK;AAaN,WAAO,uBAAS;AACf,WAAM,GAAN,CAAU,OAAM,MAAN,KAAiB,CAAjB,GAAqB,cAArB,GAAsC,WAAhD;AACA;AAfK,IAAP;AAiBA;;AAED;AACA;;;;;;;;8BAKa,O,EAAS,K,EAAO;AAC5B,OAAI,MAAM,OAAV;AAAA,OACC,MAAM,KADP;AAAA,OAEC,KAAK,IAAI,IAAJ,EAFN;AAAA,OAGC,SAAS,OAAO,SAAP,GAAmB,IAAI,MAAvB,GAAgC,EAH1C;AAAA,OAIC,OAAO,EAJR;AAKA,OAAG,OAAO,SAAP,IAAoB,UAAU,CAAjC,EAAmC;AAClC,OAAG,IAAH;AACA;AACA;AACD,WAAQ,GAAR,CAAY,GAAZ;AACA,QAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,MAAnB,EAA2B,GAA3B,EAA+B;AAC9B,QAAI,UAAU,IAAI,CAAJ,CAAd;AACA,8FAEgC,QAAQ,EAFxC,uBAE0D,QAAQ,IAFlE,8DAGuC,QAAQ,IAH/C,0DAI+B,QAAQ,MAJvC,0DAK+B,QAAQ,MALvC,oEAMyC,QAAQ,QANjD;AASA;AACD,MAAG,IAAH,CAAQ,IAAR;AACA;;AAED;;;;yBACQ,U,EAAY;AAAA;;AACnB;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAsB,wBAAtB,EAAgD,YAAM;AACrD,UAAK,aAAL;AACA,IAFD;;AAIA;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAqB,eAArB,EAAqC,iBAAS;AAC7C,QAAI,YAAY,EAAE,MAAM,MAAR,CAAhB;AAAA,QACC,UAAU,MAAK,OADhB;AAAA,QAEC,UAAU,UAAU,MAAV,CAAiB,IAAjB,EAAuB,IAAvB,EAFX;AAGA,cAAU,EAAV,CAAa,mBAAb,IAAoC,KAApC,GAA4C,UAAU,QAAV,CAAmB,kBAAnB,EAAuC,QAAvC,CAAgD,mBAAhD,EAAqE,WAArE,CAAiF,kBAAjF,CAA5C;AACA,YAAQ,IAAR,CAAa,MAAK,QAAQ,UAAU,KAAV,EAAR,CAAL,GAAb;AACA,IAND;;AAQA;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAqB,wBAArB,EAA+C,iBAAS;AACvD,QAAI,QAAQ,EAAE,MAAM,MAAR,CAAZ;AACA,UAAM,MAAN,GAAe,MAAf,GAAwB,MAAxB,GAAiC,MAAjC;AACA,MAAE,MAAF,EAAU,WAAV,CAAsB,YAAtB;AACA,IAJD;;AAMA;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAsB,2BAAtB,EAAmD,YAAU;;AAE3D,QAAI,QAAQ,EAAE,IAAF,CAAZ;AAAA,QACC,SAAS,MAAM,OAAN,CAAc,IAAd,EAAoB,IAApB,EADV;AAAA,QAEC,UAAU,MAAM,IAAN,CAAW,sBAAX,CAFX;AAGC,QAAG,EAAE,kBAAF,EAAsB,IAAtB,iBAAyC,QAAQ,GAAR,EAAzC,QAA2D,EAA3D,CAA8D,IAA9D,CAAH,EAAuE;AACtE,WAAM,GAAN,CAAU,SAAV;AACA;AACA;AACD,MAAE,kBAAF,EAAsB,MAAtB,yCAAgE,QAAQ,GAAR,EAAhE,aAAoF,QAAQ,IAAR,CAAa,WAAb,CAApF;AACF,IAVD;;AAYA;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,uBAAb,EAAsC,kBAAtC,EAA0D,iBAAS;AAClE,QAAI,IAAI,KAAR;AAAA,QACC,OAAO,EAAE,IADV;AAAA,QAEC,MAAM,EAAE,EAAE,MAAJ,CAFP;AAGA,QAAG,QAAQ,YAAX,EAAwB;AACvB,SAAI,IAAJ,CAAS,YAAT,EAAuB,EAAE,IAAF,CAAO,IAAI,IAAJ,EAAP,CAAvB,EAA2C,QAA3C,CAAoD,iBAApD,EAAuE,IAAvE,CAA4E,IAA5E;AACA;AACA;AACD,QAAG,QAAQ,YAAX,EAAwB;AACvB,SAAI,IAAJ,CAAS,IAAI,IAAJ,CAAS,YAAT,CAAT,EAAiC,WAAjC,CAA6C,iBAA7C,EAAgE,UAAhE,CAA2E,YAA3E;AACA;AACD,IAXD;;AAaA;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAsB,kBAAtB,EAA0C,UAAC,KAAD,EAAW;AACpD,MAAE,MAAM,MAAR,EAAgB,MAAhB;AACA,IAFD;;AAIA;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAqB,sBAArB,EAA4C,YAAU;AACrD,QAAI,QAAQ,EAAE,IAAF,CAAZ;AAAA,QACC,KAAK,MAAM,IAAN,CAAW,IAAX,CADN;AAAA,QAEC,MAAM,EAFP;AAGA,QAAG,GAAG,IAAH,CAAQ,IAAR,EAAc,IAAd,MAAwB,CAA3B,EAA6B;AAC5B,WAAM,GAAN,CAAU,QAAV;AACA;AACA;AACD,OAAG,IAAH,CAAQ,IAAR,EAAc,IAAd,CAAmB,YAAY;AAC9B,YAAO,EAAE,IAAF,EAAQ,IAAR,CAAa,SAAb,IAA0B,GAAjC;AACA,KAFD;AAGA,eAAW,eAAX,CAA2B,GAA3B,EAA+B,KAA/B;AACA,MAAE,kBAAF,EAAsB,MAAtB;AACA,MAAE,MAAF,EAAU,WAAV,CAAsB,YAAtB;AACA,IAdD;;AAgBA;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,YAAb,EAA2B,OAA3B,EAAoC,iBAAQ;AAC3C,QAAI,IAAI,KAAR;AAAA,QACC,MAAM,EAAE,EAAE,MAAJ,CADP;AAAA,QAEC,MAAM,EAAE,IAAF,CAAO,IAAI,GAAJ,EAAP,CAFP;AAAA,QAGC,WAAW,SAAX,QAAW,CAAC,IAAD,EAAU;AACpB,aAAQ,GAAR,CAAY,IAAZ;AACA,WAAK,WAAL,CAAiB,IAAjB,EAAsB,GAAtB;AACA,KANF;AAOA,QAAG,IAAI,OAAJ,CAAY,2BAAZ,EAAyC,EAAzC,CAA4C,KAA5C,CAAH,EAAsD;AACrD,SAAI,IAAJ,GAAW,IAAX,CAAgB,EAAhB;AACA,WAAK,UAAL,CAAgB,GAAhB,EAAoB,QAApB;AACA;AACD,IAZD;;AAcA,UAAO,IAAP;AACA;;;;;;AAGF;;;IACM,O;AACL;AACA,oBAAe;AAAA;AAEd;;AAED;AACA;;;;;;;;0BAIS,I,EAAM;AAAA;;AACd,KAAE,IAAF,CAAO;AACN,UAAM,MADA;AAEN,gCAA0B,IAFpB;AAGN,cAAU,MAHJ;AAIN,aAAS,uBAAQ;AAChB,SAAG,KAAK,MAAL,KAAgB,GAAnB,EAAuB;AACtB,aAAK,WAAL,CAAiB,IAAjB;AACA;AACA;AACD,WAAM,GAAN,CAAU,KAAK,GAAf;AACA,KAVK;AAWN,WAAO,wBAAS;AACf,WAAM,GAAN,CAAU,QAAM,MAAN,KAAiB,CAAjB,GAAqB,cAArB,GAAsC,WAAhD;AACA;AAbK,IAAP;AAeA,UAAO,IAAP;AACA;;AAED;AACA;;;;;;;8BAIa,I,EAAM;AAClB,OAAI,UAAU,KAAK,IAAnB;AAAA,OACC,SAAS,QAAQ,MADlB;AAAA,OAEC,OAAO,EAFR;AAGA,OAAG,UAAU,CAAb,EAAe;AACd,MAAE,qBAAF,EAAyB,IAAzB;AACA,WAAO,IAAP;AACA;AACD,QAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,MAAnB,EAA2B,GAA3B,EAA+B;AAC9B,sGACyE,QAAQ,CAAR,EAAW,MADpF,yBAEI,QAAQ,CAAR,EAAW,QAFf;AAKA;AACD,aAAU,CAAV,GAAc,EAAE,yBAAF,EAA6B,MAA7B,EAAd,GAAsD,EAAtD;AACA,KAAE,4BAAF,EAAgC,IAAhC,MAAwC,IAAxC;AACA;AACA;AACA;AACA,KAAE,qBAAF,EAAyB,IAAzB;AACA,UAAO,IAAP;AACA;;AAED;AACA;;;;;;;wBAIO,U,EAAY;AAClB;AACA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAsB,yBAAtB,EAAkD,iBAAS;AAC1D,QAAI,QAAQ,EAAE,MAAM,MAAR,CAAZ;AAAA,QACC,SAAS,MAAM,IAAN,CAAW,+BAAX,CADV;AAEA,QAAG,OAAO,MAAP,KAAkB,EAArB,EAAwB;AACvB,YAAO,MAAP,CAAc,EAAd;AACA,WAAM,IAAN,CAAW,SAAX;AACA;AACA;AACD,UAAM,IAAN,CAAW,SAAX;AACA,WAAO,GAAP,CAAW,QAAX,EAAoB,MAApB;AACA,IAVD;AAWA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAsB,iCAAtB,EAAyD,YAAU;AAClE;AACA,eAAW,eAAX,CAA2B,EAAE,IAAF,EAAQ,IAAR,CAAa,IAAb,CAA3B,EAA8C,EAAE,IAAF,CAA9C;AACA,IAHD;AAIA,UAAO,IAAP;AACA","file":"common-passenger.js","sourcesContent":["/***** author:zhanghao 2018-4-20 O(∩_∩)O~ *****/\n'use strict'\n\n\tclass PassengerModel {\n\n\t\tconstructor () {\n\n\t\t}\n\n\t\t// 初始化权限\n\t\tinitAuthority () {\n\t\t\tlet addempflag = $.trim($(\"#addempflage\").val()), // 是否可以添加员工\n\t\t\t\taddcustflag = $.trim($(\"#addcustflage\").val()), // 是否可以添加常用联系人\n\t\t\t\tisSearch =\t1,// 是否显示搜索框\n\t\t\t\tAuthArr = [];\n\n\t\t\tisSearch == 1 ? AuthArr.push(\"queryView\") : \"\";\n\t\t\taddempflag == 1 ? AuthArr.push(\"addEmpView\") : \"\";\n\t\t\taddcustflag == 1 ? AuthArr.push(\"addOffenView\") : \"\";\n\t\t\tPassengerModel.prototype.tabData = AuthArr;\n\t\t\tthis.viemMain(isSearch == 1 ? this.queryView() : (addcustflag == 1 ? this.addEmpView() : (addempflag == 1 ? this.addOffenView() : \"\")),{\n\t\t\t\taddempflag,\n\t\t\t\taddcustflag,\n\t\t\t\tisSearch\n\t\t\t});\n\t\t}\n\n\t\t// 主视图函数\n\t\t/*\n\t\t* \tpara:\n\t\t*\t\tcontentView: 初始化默认视图\n\t\t*\t\tauthority: 权限\n\t\t*\t\t\t\t\t{\n\t\t*\t\t\t\t\t\taddempflag, // 是否可添加员工 1|0\n\t\t*\t\t\t\t\t\taddcustflag, // 是否可添加常用联系人 1|0\n\t\t*\t\t\t\t\t\tisSearch\t// 是否可搜索 1|0\n\t\t\t*\t\t\t\t}\n\t\t* */\n\t\tviemMain (contentView,authority) {\n\t\t\tlet html = $.trim(`<div class=\"layer-container\">\n\t\t\t\t\t\t\t<div class=\"layer-cover\"></div>\n\t\t\t\t\t\t\t<div class=\"layer-content\">\n\t\t\t\t\t\t\t<div class=\"layer-title\">\n\t\t\t\t\t\t\t\t<span>选择乘车人</span>\n\t\t\t\t\t\t\t\t<span class=\"layer-close\">×</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"layer-main\">\n\t\t\t\t\t\t\t\t<div class=\"layer-select\">\n\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t<button>确定</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul class=\"layer-tab\">\n\t\t\t\t\t\t\t\t\t${authority.isSearch == 1 ? `<li class=\"layer-tab-target\">企业员工</li>` : \"\"}\n\t\t\t\t\t\t\t\t\t${authority.addempflag == 1 ? `<li ${authority.isSearch != 1 ? \"class='layer-tab-target'\" : \"\" }>新增员工</li>` : \"\"}\n\t\t\t\t\t\t\t\t\t${authority.addcustflag == 1 ? `<li ${authority.isSearch != 1 && authority.addempflag != 1 ? \"class='layer-tab-target'\" : \"\"}>新增常用联系人</li>` : \"\"}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<div class=\"layer-tab-content\">${contentView}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`);\n\t\t\t$(\"body\").append(html);\n\t\t\t$(\"body\").addClass('modal-open');\n\t\t}\n\n\t\t// 查询视图\n\t\tqueryView () {\n\n\t\t\treturn $.trim(`<div class=\"clear font-size-12 history-container\">\n\t\t\t\t\t\t\t\t<div class=\"color-cccccc float-left\">历史记录：</div>\n\t\t\t\t\t\t\t\t<div class=\"float-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"e-history-p float-left\">张三</span>\n\t\t\t\t\t\t\t\t\t<span class=\"e-history-p float-left\">李四</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"search-container position font-size-12 clear\" data-search=\"container\">\n\t\t\t\t\t\t\t\t<span class=\"search-icon position-ab\"></span>\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"input search-input\" data-search=\"input\" placeholder=\"查询员工\">\n\t\t\t\t\t\t\t\t<ul class=\"search-passenger-list mCustomScrollbar\">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`);\n\t\t}\n\n\t\t// 新增员工视图\n\t\taddEmpView () {\n\n\t\t\treturn $.trim(`\n\t\t\t\t\t\t\t<form action=\"/shopping/addCrmEmployee\" method=\"post\" id=\"addForm\">\n\t\t\t\t\t\t\t\t<ul class=\"clear\">\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">姓名：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"name\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">员工部门：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"deptid\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">证件类型：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"certtype\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">证件号码：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"certno\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">手机号码：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"mobile\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">员工职级：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"zhiwei\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">权限级别：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"level\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">员工工号：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"accno\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">出生日期：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"birthday\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<div class=\"text-align\">\n\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-big\" id=\"save-addForm\">保存</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t`);\n\n\t\t}\n\n\t\t// 新增常用联系人视图\n\t\taddOffenView () {\n\n\t\t\treturn $.trim(`\n\t\t\t\t\t\t\t<form action=\"/shopping/addLinkEmployee\" method=\"post\" id=\"addForm\">\n\t\t\t\t\t\t\t\t<ul class=\"clear\">\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">姓名：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"username\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">手机号码：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"mobile\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">证件类型：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"certtype\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">证件号码：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"certno\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class=\"ul-item float-left position font-size-12\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ul-item-name float-left\">出生日期：</span>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"birthday\" class=\"input float-left\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"position-ab ul-item-select\">*</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<div class=\"text-align\">\n\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-big\" id=\"save-addForm\">保存</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t`);\n\t\t}\n\n\t\t// 请求员工数据\n\t\t/*\n\t\t* \tpara:\n\t\t* \t\t\tkeyword:键入的关键词\n\t\t*\t\t\tcallback:响应成功的回调函数\n\t\t* */\n\t\tgetEmpData (keyword,callback) {\n\t\t\t$.ajax({\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: '/shopping/queryEmployees',\n\t\t\t\tdata: {\n\t\t\t\t\tkeyword: keyword\n\t\t\t\t},\n\t\t\t\tsuccess: data => {\n\t\t\t\t\tif(data.status === 200){\n\t\t\t\t\t\tcallback(data.data);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlayer.msg(data.msg);\n\t\t\t\t},\n\t\t\t\terror: error => {\n\t\t\t\t\tlayer.msg(error.status === 0 ? \"确保您的网络畅通，请重试\" : \"服务器异常，请重试\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// 展示员工数据\n\t\t/*\n\t\t* \tpara：\n\t\t* \t\tempData: 员工数据 array\n\t\t* \t\tthis_: 当前搜索框\n\t\t* */\n\t\tshowEmpData (empData, this_) {\n\t\t\tlet emp = empData,\n\t\t\t\tele = this_,\n\t\t\t\tul = ele.next(),\n\t\t\t\tlength = emp != undefined ? emp.length : \"\",\n\t\t\t\tlist = \"\";\n\t\t\tif(emp == undefined || length <= 0){\n\t\t\t\tul.html(`<li class=\"clear\">暂无符合的结果</li>`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log(emp);\n\t\t\tfor(let i = 0; i < length; i++){\n\t\t\t\tlet ePerson = emp[i];\n\t\t\t\tlist += `\n\t\t\t\t\t<li class=\"clear\">\n\t\t\t\t\t\t<input type=\"hidden\" value=\"${ePerson.id}\" data-name=\"${ePerson.name}\">\n\t\t\t\t\t\t<span class=\"s-p-l-name hoverTips\">${ePerson.name}</span>\n\t\t\t\t\t\t<span class=\"s-p-l-certno\">${ePerson.certno}</span>\n\t\t\t\t\t\t<span class=\"s-p-l-mobile\">${ePerson.mobile}</span>\n\t\t\t\t\t\t<span class=\"s-p-l-certer hoverTips\">${ePerson.deptname}</span> \n\t\t\t\t\t</li>\n\t\t\t\t`;\n\t\t\t}\n\t\t\tul.html(list);\n\t\t}\n\n\t\t// 添加相应事件\n\t\tEvents (global_obj) {\n\t\t\t// 打开乘客模块\n\t\t\t$(\"body\").on(\"click\", '[data-person=\"choice\"]', () => {\n\t\t\t\tthis.initAuthority();\n\t\t\t});\n\n\t\t\t// 切换模块\n\t\t\t$(\"body\").on(\"click\",\".layer-tab li\",event => {\n\t\t\t\tlet targetEle = $(event.target),\n\t\t\t\t\ttabData = this.tabData,\n\t\t\t\t\tcontent = targetEle.parent('ul').next();\n\t\t\t\ttargetEle.is(\".layer-tab-target\") ? false : targetEle.addClass(\"layer-tab-target\").siblings(\".layer-tab-target\").removeClass(\"layer-tab-target\");\n\t\t\t\tcontent.html(this[tabData[targetEle.index()]]());\n\t\t\t});\n\n\t\t\t// 关闭当前乘客模块\n\t\t\t$(\"body\").on(\"click\",\".layer-title span:last\", event => {\n\t\t\t\tlet this_ = $(event.target);\n\t\t\t\tthis_.parent().parent().parent().remove();\n\t\t\t\t$(\"body\").removeClass('modal-open');\n\t\t\t});\n\n\t\t\t// 添加乘客\n\t\t\t$(\"body\").on(\"click\", \".search-passenger-list li\", function(){\n\n\t\t\t\t\tlet this_ = $(this),\n\t\t\t\t\t\tinput_ = this_.parents('ul').prev(),\n\t\t\t\t\t\tinput_h = this_.find(\"input[type='hidden']\");\n\t\t\t\t\t\tif($(\".layer-select ul\").find(`li[data-id=${input_h.val()}]`).is(\"li\")){\n\t\t\t\t\t\t\tlayer.msg(\"请不要重复添加\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(\".layer-select ul\").append(`<li class=\"float-left\" data-id=\"${input_h.val()}-0\">${input_h.attr('data-name')}</li>`);\n\t\t\t});\n\n\t\t\t// 悬浮显示选中乘客删除按钮\n\t\t\t$(\"body\").on(\"mouseenter mouseleave\", \".layer-select li\", event => {\n\t\t\t\tvar e = event,\n\t\t\t\t\ttype = e.type,\n\t\t\t\t\tele = $(e.target);\n\t\t\t\tif(type == 'mouseenter'){\n\t\t\t\t\tele.attr(\"data-value\", $.trim(ele.text())).addClass(\"remove-target-p\").html(\"删除\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(type == 'mouseleave'){\n\t\t\t\t\tele.html(ele.attr(\"data-value\")).removeClass(\"remove-target-p\").removeAttr(\"data-value\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// 删除当前乘客\n\t\t\t$(\"body\").on(\"click\", \".remove-target-p\", (event) => {\n\t\t\t\t$(event.target).remove();\n\t\t\t});\n\n\t\t\t// 关闭乘客选择框\n\t\t\t$(\"body\").on(\"click\",\".layer-select button\",function(){\n\t\t\t\tlet this_ = $(this),\n\t\t\t\t\tul = this_.prev(\"ul\"),\n\t\t\t\t\tids = \"\";\n\t\t\t\tif(ul.find(\"li\").size() <= 0){\n\t\t\t\t\tlayer.msg(\"至少选择一位\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tul.find(\"li\").each(function () {\n\t\t\t\t\tids += $(this).attr(\"data-id\") + \",\";\n\t\t\t\t});\n\t\t\t\tglobal_obj.contactCallback(ids,this_);\n\t\t\t\t$(\".layer-container\").remove();\n\t\t\t\t$(\"body\").removeClass('modal-open');\n\t\t\t});\n\n\t\t\t//实时搜索乘客\n\t\t\t$(\"body\").on(\"textchange\", 'input', event =>{\n\t\t\t\tlet e = event,\n\t\t\t\t\tele = $(e.target),\n\t\t\t\t\tval = $.trim(ele.val()),\n\t\t\t\t\tcallback = (data) => {\n\t\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t\tthis.showEmpData(data,ele);\n\t\t\t\t\t};\n\t\t\t\tif(ele.parents('[data-search=\"container\"]').is(\"div\")){\n\t\t\t\t\tele.next().html(\"\");\n\t\t\t\t\tthis.getEmpData(val,callback);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t// 常用联系人模块\n\tclass Contact {\n\t\t//参数：页面的全局对象\n\t\tconstructor () {\n\n\t\t}\n\n\t\t// 获取常用联系人数据\n\t\t/*\n\t\t*\tpara list\n\t\t*\ttype:air | train | hotel\n\t\t* */\n\t\tgetData (type) {\n\t\t\t$.ajax({\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: `/frequent/contact/${type}`,\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: data => {\n\t\t\t\t\tif(data.status === 200){\n\t\t\t\t\t\tthis.viewContact(data);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlayer.msg(data.msg);\n\t\t\t\t},\n\t\t\t\terror: error => {\n\t\t\t\t\tlayer.msg(error.status === 0 ? \"确保您的网络畅通，请重试\" : \"服务器异常，请重试\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\t// 视图常用联系人\n\t\t/*\n\t\t*\tpara list\n\t\t*\tdata:常用联系人数据\n\t\t */\n\t\tviewContact (data) {\n\t\t\tlet dataArr = data.data,\n\t\t\t\tlength = dataArr.length,\n\t\t\t\tlist = \"\";\n\t\t\tif(length <= 0){\n\t\t\t\t$('[data-js=\"contact\"]').hide();\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tfor(let i = 0; i < length; i++){\n\t\t\t\tlist += `\n\t\t\t\t\t<span class=\"float-left contact_item border-radius text-ellipsis\" id=\"${dataArr[i].idtype}\">\n\t\t\t\t\t\t${dataArr[i].username}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t\tlength <= 7 ? $('[data-js=\"contactshut\"]').remove() : \"\";\n\t\t\t$('[data-js=\"contactcontent\"]').html(`${list}`);\n\t\t\t// 默认选中已添加的联系人\n\t\t\t//TODO:这里需要修改\n\t\t\tselectPassanger();\n\t\t\t$('[data-js=\"contact\"]').show();\n\t\t\treturn this;\n\t\t}\n\n\t\t// 事件绑定\n\t\t/*\n\t\t*\tpara list\n\t\t*\tglobal_obj:调用页面的全局对象\n\t\t* */\n\t\tEvent (global_obj) {\n\t\t\t// 展开收起常用联系人\n\t\t\t$(\"body\").on('click', '[data-js=\"contactshut\"]' , event => {\n\t\t\t\tvar this_ = $(event.target),\n\t\t\t\t\tthis_c = this_.prev('[data-js=\"contact-container\"]');\n\t\t\t\tif(this_c.height() > 45){\n\t\t\t\t\tthis_c.height(40);\n\t\t\t\t\tthis_.html(\"展开常用联系人\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis_.html(\"收起常用联系人\");\n\t\t\t\tthis_c.css(\"height\",\"100%\");\n\t\t\t});\n\t\t\t$(\"body\").on(\"click\", '[data-js=\"contactcontent\"] span', function(){\n\t\t\t\t// 参数ids，逗号隔开\n\t\t\t\tglobal_obj.contactCallback($(this).attr(\"id\"),$(this));\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\t}\n\n\n\n\n\n\n"]}